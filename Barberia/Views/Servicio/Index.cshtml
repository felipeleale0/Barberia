@model List<Barberia.Models.Domain.Servicio>

<h2 class="titulo" style="margin-bottom:20px;">Servicios</h2>

<!-- ALERTAS -->
@if (TempData["OK"] != null)
{
    <div class="alert alert-success" style="margin-bottom:15px;">@TempData["OK"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger" style="margin-bottom:15px;">@TempData["Error"]</div>
}

<!-- FORM CREAR -->
<div style="
    background:white;
    padding:18px;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
    margin-bottom:25px;">

    <form asp-action="Crear" method="post" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">

        <input type="text" name="nombre" placeholder="Nombre del servicio" required
               style="padding:8px 12px; border:1px solid #ccc; border-radius:6px; width:220px;" />

        <input type="number" step="0.01" name="precio" placeholder="Precio" required
               style="padding:8px 12px; border:1px solid #ccc; border-radius:6px; width:140px;" />

        <input type="text" name="descripcion" placeholder="Descripción (opcional)"
               style="padding:8px 12px; border:1px solid #ccc; border-radius:6px; width:260px;" />

        <button type="submit" class="btn btn-primary"
                style="padding:8px 16px; border-radius:6px;">
            ➕ Agregar
        </button>
    </form>
</div>

<!-- TABLA DE SERVICIOS -->
<table class="table" style="
    background:white;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);">

    <thead class="table-light">
        <tr>
            <th style="padding:14px;">Servicio</th>
            <th style="padding:14px;">Precio</th>
            <th style="padding:14px;">Descripción</th>
            <th style="padding:14px; width:160px;">Acciones</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var s in Model)
        {
            <tr style="transition:0.2s;">
                <td style="padding:14px;">@s.Nombre</td>
                <td style="padding:14px;">$ @s.Precio</td>
                <td style="padding:14px;">@s.Descripcion</td>

                <td style="padding:14px; display:flex; gap:12px;">

                    <!-- ELIMINAR (botón grande y rojo) -->
                    <form asp-action="Eliminar" asp-route-id="@s.Id" method="post">
                        <button type="submit"
                                style="
                            background:#dc3545;
                            color:white;
                            border:none;
                            padding:10px 16px;
                            border-radius:8px;
                            font-weight:600;
                            cursor:pointer;">
                            🗑 Eliminar
                        </button>
                    </form>

                    <!-- EDITAR (abre formulario inline) -->
                    <button type="button"
                            onclick="abrirEdicion(@s.Id)"
                            style="
                        background:#0d6efd;
                        color:white;
                        border:none;
                        padding:10px 16px;
                        border-radius:8px;
                        font-weight:600;
                        cursor:pointer;">
                        ✏️ Editar
                    </button>
                </td>
            </tr>

            <!-- FILA DE EDICIÓN OCULTA -->
            <tr id="editRow-@s.Id" style="display:none; background:#f9f9f9;">
                <td colspan="4" style="padding:16px;">

                    <form asp-action="Editar" method="post" style="display:flex; gap:12px; flex-wrap:wrap;">

                        <input type="hidden" name="id" value="@s.Id" />

                        <input type="text" name="nombre" value="@s.Nombre"
                               style="padding:8px 10px; border:1px solid #ccc; border-radius:6px; width:200px;" />

                        <input type="number" step="0.01" name="precio" value="@s.Precio"
                               style="padding:8px 10px; border:1px solid #ccc; border-radius:6px; width:140px;" />

                        <input type="text" name="descripcion" value="@s.Descripcion"
                               style="padding:8px 10px; border:1px solid #ccc; border-radius:6px; width:240px;" />

                        <button type="submit"
                                style="
                            background:#28a745;
                            color:white;
                            border:none;
                            padding:10px 16px;
                            border-radius:8px;
                            font-weight:600;
                            cursor:pointer;">
                            ✔ Guardar cambios
                        </button>

                        <button type="button"
                                onclick="cerrarEdicion(@s.Id)"
                                style="
                            background:#6c757d;
                            color:white;
                            border:none;
                            padding:10px 16px;
                            border-radius:8px;
                            font-weight:600;
                            cursor:pointer;">
                            ✖ Cancelar
                        </button>

                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>
<script>
    function abrirEdicion(id) {
        document.getElementById("editRow-" + id).style.display = "table-row";
    }

    function cerrarEdicion(id) {
        document.getElementById("editRow-" + id).style.display = "none";
    }
</script>